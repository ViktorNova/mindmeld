<template name="inviteUser">
  {{> header}}
  <div class="container-fluid">
    <div id="main">
      {{> breadcrumbHeader}}
      {{> projectLinks}}
      {{> errorNotification}}
      <div class="row-fluid">
        {{> notifications}}
        {{> inviteUserForm}}
      </div>
    </div>
  </div>
</template>

<template name="inviteUserForm">
  {{#if notificationCount}}
  <div class="span9">
  {{else}}
  <div class="span12">
  {{/if}}
    <h2 id="remainingInviteCount">Remaining invites available: </h2>
    <div class="row-fluid">
      <div class="span6">
        <h3>Invite Users by username</h3>
        <p class="notification"><em>Users who have chosen to make their profiles public are visible</em></p>
        <input type="hidden" id="inviteByUsername" tabindex="1" />
      </div>
      <div class="span6">    
        <h3>Invite Users by email</h3>
        <p class="notification"><em>Invitations will be sent to the email address(es) entered</em></p>
        <input type="hidden" id="inviteByEmail" tabindex="2" />
      </div>
    </div>
    <div class="row-fluid">
      <div class="span12 text-center">
        <button type="button" id="invite-users" class="btn btn-primary" tabindex="3"><i class="icon-user"></i> Invite Users</button>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span12">
      {{#with currentTeam}}
        <input type="hidden" id="teamId" value="{{_id}}"/>
        <h3> {{getTeamInvites.count}} Invites outstanding:</h3>
        <div class="tabbable">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-outstanding-invites-by-username" data-toggle="tab">By Username <span class="badge">{{getTeamInvitesWithUsername.count}}</span></a></li>
            <li><a href="#tab-outstanding-invites-by-email" data-toggle="tab">By Email <span class="badge">{{getTeamInvitesWithEmail.count}}</span></a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-outstanding-invites-by-username">
              <table class="table table-striped">
                {{#if getTeamInvitesWithUsername.count}}
                <tr>
                  <td class="span11">Username</td>
                  <td class="span1">Action</td>
                </tr>
                {{#each getTeamInvitesWithUsername}}
                <tr>
                  <td>{{username}}</td>
                  <td><button type="button" class="btn" id="revokeByUsername" data-username="{{username}}">Revoke</button></td>
                </tr>
                {{/each}}
                {{else}}
                <tr>
                  <td><div class="text-center"><em>No invites by username</em></div></td>
                </tr>
                {{/if}}
              </table>
            </div>
            <div class="tab-pane" id="tab-outstanding-invites-by-email">
              <table class="table table-striped">
                {{#if getTeamInvitesWithEmail.count}}
                <tr>
                  <td class="span11">Email</td>
                  <td class="span1"><div class="text-center">Action</div></td>
                </tr>
                {{#each getTeamInvitesWithEmail}}
                <tr>
                  <td>{{email}}</td>
                  <td><div class="text-center"><button type="button" class="btn" id="revokeByemail" data-email="{{email}}"><i class="icon-remove"></i> Revoke</button></div></td>
                </tr>
                {{/each}}
                {{else}}
                <tr>
                  <td><div class="text-center"><em>No invites by email</em></div></td>
                </tr>
                {{/if}}
              </table>
            </div>
          </div>
        </div>
      {{/with}}
      </div>
    </div>
  </div>
</template>